# Start of script generated by program MSIAppFactory by Jan-BaptistVandeuren
name: MSI App Factory
parameters:
- name: operationalMode
  displayName: Select operational mode
  type: string
  default: Publish
  values:
  - Verify
  - Package
  - Publish
- name: archiveMode
  displayName: Archive published apps
  type: string
  default: 'Yes'
  values:
  - 'Yes'
  - 'No'
variables:
  pipeline_1: Pipeline_1
  pipeline_1AppFolderPath: Apps\\App1
  pipeline_1Source: Pipeline_Source_1
  pipeline_2: Pipeline_2
  pipeline_2AppFolderPath: Apps\\App2
  pipeline_2Source: Pipeline_Source_2
  script_build: Scripts\build.ps1
resources:
  pipelines:
  - pipeline: ${ variables.pipeline_1 }
    source: ${ variables.pipeline_1Source }
    trigger: true
  - pipeline: ${ variables.pipeline_2 }
    source: ${ variables.pipeline_2Source }
    trigger: true
pool:
  vmImage: windows-latest
steps:
- task: ${ variables.pipeline_1 }
  inputs:
    targetType: filePath
    filePath: ${{ variables.script_build }}
    arguments: -AppFolderPath "${ variables.pipeline_1AppFolderPath }"
  condition: eq(resources.pipeline.${variables.pipeline_1}.result, 'Succeeded')
- task: ${ variables.pipeline_2 }
  inputs:
    targetType: filePath
    filePath: ${{ variables.script_build }}
    arguments: -AppFolderPath "${ variables.pipeline_2AppFolderPath }"
  condition: eq(resources.pipeline.${variables.pipeline_2}.result, 'Succeeded')

# End of script generated by program MSIAppFactory by Jan-BaptistVandeuren